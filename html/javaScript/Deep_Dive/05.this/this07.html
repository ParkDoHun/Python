<!-- 1. 함수 호출 -->
<script>
    /*
    내부함수는 일반 함수, 메소드, 콜백함수 어디에서 선언되었든 관게없이 this는 전역객체를 바인딩한다.
    더글라스 크락포드는 "이것은 설계 단계의 결함으로 메소드가 내부함수를 사용하여 자신의 작업을 돕게 할 수 없다는 것을 의미한다" 라고 말한다.
    내부함수의 this가 전역객체를 참조하는 것을 회피방법은 아래와 같다.
    */

    var value = 1;
    
    var obj = {
        value: 100,
        foo: function() {
            var that = this;    // Workaround : this === obj
            /*
            this: {
                value: number;
                foo: () => void;
            }
            */
            console.log("foo's this: ", this);      // Object
            console.log("foo's this.value: ", this.value);      // 100
            
            function bar() {
                console.log("bar's this: ", this);              // Window
                console.log("bar's this.value: ", this.value);  // 1

                console.log("bar's that: ", that);  // Object
                console.log("bar's that.value: ", that.value);  // 100
            }
            bar();
        }
    };

    obj.foo();
</script>